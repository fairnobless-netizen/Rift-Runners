:root {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color: #ecf1ff;
  background: #080b14;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --android-overlay-top: 0px;
  --android-overlay-right: 0px;
  --android-overlay-bottom: 0px;
  --android-inset-breathing: 20px;
  --header-h: clamp(34px, calc(46px * var(--ui-scale)), 46px);
  --shell-gap: clamp(0.35rem, 1.5vw, 0.7rem);
  --side-w: clamp(72px, calc(180px * var(--ui-scale)), 132px);
  --side-w-left: var(--side-w);
  --side-w-right: var(--side-w);
  --ui-scale: 1;
}


*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  overscroll-behavior: none;
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

body {
  height: var(--tg-viewport-stable-h);
  min-height: var(--tg-viewport-stable-h);
  margin: 0;
  overflow: hidden;

  /* Prevent "rubber band" + swipe gestures moving the webview */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
  touch-action: none;
  background: radial-gradient(circle at top, #13192c, #070a12 60%);
}
html.is-android body {
  height: calc(var(--app-vh, 1vh) * 100);
  min-height: calc(var(--app-vh, 1vh) * 100);
}

#root {
  height: var(--tg-viewport-stable-h);
  min-height: var(--tg-viewport-stable-h);
}

html.is-android #root {
  height: calc(var(--app-vh, 1vh) * 100);
  min-height: calc(var(--app-vh, 1vh) * 100);
}

.page {
  position: relative; /* IMPORTANT: anchor for WsDebugOverlay absolute root */
  display: flex;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  flex-direction: column;
  gap: var(--shell-gap);
  height: var(--tg-viewport-stable-h);
  min-height: var(--tg-viewport-stable-h);
  width: 100%;
  max-width: none;
  margin: 0;
  padding-top: calc(var(--tg-content-top, 0px) + var(--safe-top));
  padding-right: calc(var(--tg-content-right, 0px) + var(--safe-right));
  padding-bottom: calc(var(--tg-content-bottom, 0px) + var(--safe-bottom));
  padding-left: calc(var(--tg-content-left, 0px) + var(--safe-left));
  overflow: hidden;
}

html.is-android .page {
  height: calc(var(--app-vh, 1vh) * 100);
  min-height: calc(var(--app-vh, 1vh) * 100);
  padding-top: calc(var(--tg-content-top, 0px) + var(--safe-top) + var(--android-overlay-top, 0px));
  padding-right: calc(var(--tg-content-right, 0px) + var(--safe-right) + var(--android-overlay-right, 0px) + var(--android-inset-breathing, 20px));
  padding-bottom: calc(var(--tg-content-bottom, 0px) + var(--safe-bottom) + var(--android-overlay-bottom, 0px));
  padding-left: calc(var(--tg-content-left, 0px) + var(--safe-left) + var(--android-inset-breathing, 20px));
}

.hud {
  width: auto;
  margin: 0 var(--shell-gap);
  min-height: var(--header-h);
  height: var(--header-h);
  background: #0f1630cc;
  border-top: 1px solid #29345d;
  border-bottom: 1px solid #29345d;
  border-left: 0;
  border-right: 0;
  border-radius: 0;
  display: flex;
  align-items: center;
  padding: 0.2rem 0.6rem;
  overflow: hidden;
  flex: 0 0 auto;
}

.hud h1 {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.15;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.45rem;
  margin-top: 0;
  min-width: 0;
  flex-wrap: nowrap;
  overflow: hidden;
  width: 100%;
  scrollbar-width: none;
  font-size: 0.8rem;
  line-height: 1.15;
}

.hud-left,
.hud-right {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  min-width: 0;
}

.hud-left {
  flex: 1 1 auto;
  min-width: 0;
}

.hud-right {
  flex: 1 1 auto;
  justify-content: flex-end;
  overflow-x: auto;
  scrollbar-width: none;
}

.hud-right::-webkit-scrollbar {
  display: none;
}

.hud-lives {
  width: auto;
  flex: 0 0 auto;
  display: inline-flex;
  align-self: center;
  align-items: center;
  justify-content: center;
  gap: 0.12rem;
  padding: 0.04rem 0.18rem;
  white-space: nowrap;
  font-size: 0.78rem;
  line-height: 1;
  letter-spacing: 0.04em;
}

.hud-heart {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.hud-heart--full {
  opacity: 1;
}

.hud-heart--empty {
  opacity: 0.85;
}

.hud-cards {
  display: flex;
  gap: 0.35rem;
}

.hud-card {
  min-width: 3.5rem;
  padding: 0.18rem 0.4rem 0.22rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  border-radius: 8px;
  border: 1px solid #5f74bb80;
  background: linear-gradient(170deg, #2a3c6d80, #17234788);
  box-shadow: inset 0 0 10px #9cc0ff1f, 0 0 8px #74a3ff1c;
}

.hud-card__label {
  font-size: 0.52rem;
  line-height: 1;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #a8b9ee;
  opacity: 0.85;
}

.hud-card__value {
  margin-top: 0.08rem;
  font-size: 0.78rem;
  line-height: 1.05;
  color: #f2f7ff;
  font-weight: 700;
}

.hud-card--score {
  border-color: #95c7ffaa;
  box-shadow: inset 0 0 12px #c6e0ff2b, 0 0 11px #7ac3ff42;
}

.stats-row::-webkit-scrollbar {
  display: none;
}

.hud-slots {
  --hud-slot-w: clamp(92px, 14vw, 140px);
  display: grid;
  align-items: center;
  gap: 0.35rem;
  width: 100%;
  min-width: 0;
}

.hud-slots--multiplayer {
  grid-template-columns: repeat(4, var(--hud-slot-w));
  justify-content: flex-start;
}

.hud-slots--single {
  grid-template-columns: max-content;
  width: auto;
}

.hud-slot {
  --player-accent: #8bb5ff;
  width: var(--hud-slot-w);
  min-width: var(--hud-slot-w);
  min-height: 1.55rem;
  display: flex;
  align-items: center;
  gap: 0.36rem;
  border-radius: 7px;
  border: 1px solid color-mix(in srgb, var(--player-accent) 45%, #2d3864);
  background: linear-gradient(160deg, color-mix(in srgb, var(--player-accent) 10%, #1a2447) 0%, #1a24475c 100%);
  box-shadow: inset 0 0 10px color-mix(in srgb, var(--player-accent) 22%, transparent), 0 0 8px color-mix(in srgb, var(--player-accent) 24%, transparent);
  padding: 0.16rem 0.32rem;
}

.hud-slots--single .hud-slot {
  width: auto;
  min-width: 0;
}

.hud-slot--empty {
  min-height: 1.45rem;
  border-style: dashed;
  opacity: 0.58;
}


.hud-slot--inactive {
  border-color: #4b4b56;
  background: #2a2a3345;
}

.hud-slot--inactive .hud-slot-avatar,
.hud-slot--inactive .hud-lives {
  color: #8e909d;
}

.hud-slot--inactive .hud-slot-avatar {
  opacity: 0.7;
}

.hud-slot-avatar {
  display: inline-flex;
  width: 1.02rem;
  height: 1.02rem;
  align-items: center;
  justify-content: center;
  flex: 0 0 auto;
}

.hud-slot-avatar svg {
  width: 100%;
  height: 100%;
  fill: none;
  stroke: var(--player-accent);
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: drop-shadow(0 0 4px color-mix(in srgb, var(--player-accent) 65%, transparent));
}

.playfield-shell {
  display: flex;
  align-items: stretch;
  gap: var(--shell-gap);
  flex: 1;
  min-height: 0;
  min-width: 0;
  width: 100%;
  padding: 0 var(--shell-gap) var(--shell-gap);
}

.control-column {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #0f1630cc;
  border: 1px solid #27335c;
  border-radius: 10px;
  padding: 0.5rem;
  min-height: 0;
  min-width: 0;
  flex: 0 0 var(--side-w);
  width: var(--side-w);
}

.control-column--left {
  flex-basis: var(--side-w-left);
  width: var(--side-w-left);
  flex-direction: column;
  justify-content: flex-start;
  gap: calc(8px * var(--ui-scale));
  align-self: stretch;
}

.left-panel {
  width: 100%;
  min-height: 0;
}

.left-panel--icons {
  flex: 0 0 auto;
  padding-top: calc(0.1rem * var(--ui-scale));
}

.left-panel--joystick {
  flex: 1;
  display: flex;
}

.control-column--right {
  flex-basis: var(--side-w-right);
  width: var(--side-w-right);
  flex-direction: column;
  justify-content: center;
  gap: calc(0.55rem * var(--ui-scale));
  align-self: stretch;
  font-size: calc(1rem * var(--ui-scale));
}

.left-nav {
  --nav-grid-gap: calc(0.12rem * var(--ui-scale));
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: calc(0.14rem * var(--ui-scale));
}

.nav-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--nav-grid-gap);
}

.nav-btn {
  width: 68%;
  aspect-ratio: 1 / 1;
  min-width: 44px;
  min-height: 44px;
  border-radius: 10px;
  padding: 0;
  display: grid;
  place-items: center;
  place-self: center;
  background: transparent;
  position: relative;
  user-select: none;
  -webkit-user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.nav-btn__plate {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(160deg, #6fa2e040 0%, #3f6cae80 60%, #33588f8a 100%);
  border: 1px solid #99c7ff88;
  box-shadow: inset 0 0 8px #d8ebff33, 0 0 7px #8ebdff30;
  transform: scale(0.62);
  transform-origin: center;
}

.nav-btn__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 92%;
  height: 92%;
  font-size: calc(1.76rem * var(--ui-scale));
  line-height: 1;
}


.left-joystick {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: calc(6px * var(--ui-scale));
}

.joystick-wrap {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.joystick-touch-zone {
  width: 100%;
  height: 100%;
  aspect-ratio: unset;
  max-width: none;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

.joystick-touch-zone,
.joystick-touch-zone * {
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

.joystick-touch-zone--active {
  background: radial-gradient(circle at center, #72ffd21f, transparent 72%);
}


.right-stack {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: calc(0.75rem * var(--ui-scale));
  flex: 1;
  width: 100%;
}

.right-stack-top {
  width: 100%;
  flex: 0 0 auto;
}

.right-stack-middle {
  width: 100%;
  flex: 1;
  display: flex;
  align-items: center;
}

.right-panel {
  width: 100%;
  max-width: 100%;
  position: relative;
  overflow: hidden;
  background:
    linear-gradient(150deg, #b5f2ff1c 0%, transparent 44%),
    linear-gradient(210deg, #8ca6ff1e 0%, #101a36d9 48%, #0a1124e3 100%);
  border: 1px solid #8ec2ff5e;
  border-radius: 10px;
  padding: calc(0.5rem * var(--ui-scale));
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: calc(0.5rem * var(--ui-scale));
  box-shadow: inset 0 0 0 1px #cbf0ff1f, inset 0 12px 20px #a3ffdc12, 0 0 14px #3d8fd340;
}

.right-panel::before {
  content: '';
  position: absolute;
  inset: -22%;
  pointer-events: none;
  opacity: 0.36;
  background:
    radial-gradient(circle at 20% 30%, #7cffbc1e 0%, transparent 42%),
    radial-gradient(circle at 78% 18%, #76ffe217 0%, transparent 38%),
    radial-gradient(circle at 58% 75%, #b4ffd616 0%, transparent 44%);
  animation: right-panel-moss-shimmer 11s ease-in-out infinite alternate;
}

.right-panel--zoom {
  padding: calc(0.45rem * var(--ui-scale));
  gap: calc(0.28rem * var(--ui-scale));
  align-items: stretch;
}

.right-zoom-label {
  display: none;
}


.nav-btn--multiplayer {
  width: max(44px, calc((100% - var(--nav-grid-gap)) * 0.36));
}

.right-panel--actions {
  --action-stack-gap: calc(1.35rem * var(--ui-scale));
  --boost-separation-gap: calc(1.8rem * var(--ui-scale));
  gap: var(--action-stack-gap);
  justify-content: center;
}
.game-shell {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 0;
  min-height: 0;
  height: 100%;
  flex: 1 1 auto;
  overflow: hidden;
}


html.is-android .hud {
  width: min(92vw, calc(100% - var(--safe-left) - var(--safe-right) - 16px));
  margin-left: auto;
  margin-right: auto;
}

html.is-android .playfield-shell {
  gap: clamp(0.18rem, 1vw, 0.42rem);
  padding-left: clamp(2px, 0.45vw, 8px);
  padding-right: clamp(2px, 0.45vw, 8px);
}

html.is-android .control-column {
  padding-left: clamp(0.28rem, 1.05vw, 0.42rem);
  padding-right: clamp(0.28rem, 1.05vw, 0.42rem);
}

.game-canvas {
  aspect-ratio: var(--arena-ar, 576 / 448);
  width: auto;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  min-width: 0;
  min-height: 0;

  border: 2px solid #27335c;
  border-radius: 12px;
  overflow: hidden;
  background: #0a0f1c;
}

.zoom-slider {
  width: 100%;
  height: calc(26px * var(--ui-scale));
  padding: calc(0.12rem * var(--ui-scale)) 0;
}

.telescope-range {
  --tube-track: linear-gradient(180deg, #d7f2ff40 0%, #6078a8b5 52%, #32496eb8 100%);
  --tube-highlight: linear-gradient(180deg, #fbfffe6b 0%, transparent 65%);
  --tube-thumb: linear-gradient(180deg, #ffe8a0 0%, #deaa56 58%, #987239 100%);
  position: relative;
  z-index: 1;
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
}

.telescope-range::-webkit-slider-runnable-track {
  height: calc(9px * var(--ui-scale));
  border-radius: 999px;
  border: 1px solid #bde4ff70;
  background: var(--tube-highlight), var(--tube-track);
  box-shadow: inset 0 1px 3px #ffffff2b, inset 0 -2px 4px #0b12297a, 0 0 8px #5fb7ff3a;
}

.telescope-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: calc(14px * var(--ui-scale));
  height: calc(24px * var(--ui-scale));
  margin-top: calc(-8px * var(--ui-scale));
  border-radius: 999px;
  border: 1px solid #ffefb0;
  background: var(--tube-thumb);
  box-shadow: 0 0 8px #ffcf6a6a, inset 0 1px 2px #fff5d0;
}

.telescope-range::-moz-range-track {
  height: calc(9px * var(--ui-scale));
  border-radius: 999px;
  border: 1px solid #bde4ff70;
  background: var(--tube-highlight), var(--tube-track);
  box-shadow: inset 0 1px 3px #ffffff2b, inset 0 -2px 4px #0b12297a, 0 0 8px #5fb7ff3a;
}

.telescope-range::-moz-range-thumb {
  width: calc(14px * var(--ui-scale));
  height: calc(24px * var(--ui-scale));
  border-radius: 999px;
  border: 1px solid #ffefb0;
  background: var(--tube-thumb);
  box-shadow: 0 0 8px #ffcf6a6a, inset 0 1px 2px #fff5d0;
}

button {
  border: none;
  border-radius: 10px;
  padding: 0.45rem 0.6rem;
  background: #2f3f72;
  color: #ecf1ff;
  font-weight: 700;
}

.control-column--right button {
  font-size: calc(0.8rem * var(--ui-scale));
  padding: calc(0.38rem * var(--ui-scale)) calc(0.58rem * var(--ui-scale));
}

.right-reset-btn {
  position: relative;
  z-index: 1;
  width: 100%;
  min-height: calc(30px * var(--ui-scale));
  border: 1px solid #9dcfff80;
  border-radius: 9px;
  background: linear-gradient(155deg, #9ce8ff24 0%, #3d5f9559 52%, #1d2e5085 100%);
  box-shadow: inset 0 0 0 1px #effbff21, 0 0 9px #59a6ea45;
  color: #ecf8ff;
  font-size: calc(0.72rem * var(--ui-scale));
  line-height: 1.1;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-align: center;
}

button:disabled {
  opacity: 0.55;
}

.joystick-pad {
  position: relative;
  user-select: none;
  -webkit-user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  width: min(100%, calc(150px * var(--ui-scale)));
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  border: 2px solid #7fcfff83;
  background:
    radial-gradient(circle at 30% 24%, #f4fffb29 0%, transparent 35%),
    radial-gradient(circle at 72% 68%, #8ce2c625 0%, transparent 34%),
    radial-gradient(circle at 50% 56%, #2d3f658f 0%, #17233f 62%, #0f1a33 100%);
  box-shadow: inset 0 0 0 1px #d5ebff1f, inset 0 0 18px #8ff7c51a, 0 0 12px #47aff34d;
  touch-action: none;
}

.joystick-pad::before {
  content: '';
  position: absolute;
  inset: 12%;
  border-radius: 50%;
  border: 1px solid #89dbcd4d;
  box-shadow: 0 0 10px #82ffd034;
}

.joystick-pad::after {
  content: '';
  position: absolute;
  inset: 24%;
  border-radius: 50%;
  border: 1px solid #7f91ca66;
}

.joystick-pad--active {
  border-color: #b6fff2;
  box-shadow: inset 0 0 0 1px #ecfffd54, inset 0 0 20px #98ffdc30, 0 0 16px #64c8ff8f;
}

.joystick-knob {
  position: absolute;
  top: 50%;
  left: 50%;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #d3deff, #8295d2 75%);
  box-shadow: 0 0 0 2px #223157, 0 4px 16px #02040a80;
  width: calc(44px * var(--ui-scale));
  height: calc(44px * var(--ui-scale));
}

.landscape-fallback-dpad {
  display: none;
}

.shop-panel {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: calc(0.35rem * var(--ui-scale));
}

.shop-buy-btn {
  width: 100%;
  min-height: calc(36px * var(--ui-scale));
  font-size: calc(0.68rem * var(--ui-scale));
  background: #38508a;
  border-radius: 8px;
  padding: calc(0.35rem * var(--ui-scale));
}

.action-btn {
  width: 100%;
  min-height: calc(42px * var(--ui-scale));
  border-radius: 11px;
  max-width: 100%;
  align-self: stretch;
  font-size: calc(0.78rem * var(--ui-scale));
  touch-action: manipulation;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #93c7ff6e;
  color: #ebf8ff;
  background: linear-gradient(160deg, #bde4ff1f 0%, #334b7a91 48%, #1a28488f 100%);
  box-shadow: inset 0 0 0 1px #ecf8ff1d, inset 0 8px 10px #83fff20c, 0 0 10px #5fb7ff30;
}

.bomb-btn,
.detonate-btn {
  width: calc(64px * var(--ui-scale));
  height: calc(64px * var(--ui-scale));
  min-height: calc(64px * var(--ui-scale));
  border-radius: 999px;
  max-width: none;
  align-self: center;
  padding: 0;
  font-size: calc(0.82rem * var(--ui-scale));
}

.action-btn--boost {
  width: 100%;
  aspect-ratio: 1.25 / 1;
  min-height: calc(30px * var(--ui-scale));
  font-size: calc(0.7rem * var(--ui-scale));
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.action-btn--boost-upper {
  margin-bottom: var(--boost-separation-gap);
}

.action-btn--boost-lower {
  margin-top: var(--boost-separation-gap);
}

.action-btn--bomb {
  margin-top: 16px;
  border-color: #b9cae282;
  box-shadow: inset 0 0 0 1px #eef6ff26, 0 0 10px #bfd2ee3b;
}

.action-btn--detonate {
  margin-bottom: 16px;
  border-color: #ff939382;
  box-shadow: inset 0 0 0 1px #ffe4e421, 0 0 12px #ff646449;
}

.action-btn--boost {
  border-color: #7deec882;
  color: #e3fff6;
  box-shadow: inset 0 0 0 1px #e8fff31f, 0 0 10px #65ffc640;
}

.action-btn:disabled {
  opacity: 0.62;
}

html[data-device="phone"] {
  --side-w: clamp(64px, calc(148px * var(--ui-scale)), 104px);
}

html[data-device="tablet"] {
  --side-w: clamp(72px, calc(172px * var(--ui-scale)), 122px);
}

html[data-device="desktop"] {
  --side-w: clamp(86px, calc(196px * var(--ui-scale)), 138px);
}

html[data-device="desktop"] .settings-modal {
  width: min(86vw, 640px);
}

html[data-orient="landscape"] .page,
html[data-orient="landscape"] .playfield-shell,
html[data-orient="landscape"] .game-shell,
html[data-orient="landscape"] .control-column,
html[data-orient="landscape"] .right-panel {
  min-width: 0;
  min-height: 0;
}

@media (max-width: 860px) {
  .control-column {
    padding: 0.35rem;
  }

}

@media (orientation: landscape) and (pointer: coarse) {
  :root {
    --side-w-left: clamp(90px, calc(210px * var(--ui-scale)), 154px);
    --side-w-right: var(--side-w);
  }
}

@media (orientation: portrait) {
  .playfield-shell {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: minmax(0, 1fr) auto;
    padding: 0 var(--shell-gap) var(--shell-gap);
  }

  .control-column--left,
  .control-column--right {
    min-height: auto;
  }

  .control-column--left {
    order: 2;
    align-items: flex-start;
    justify-content: center;
    padding: 0.45rem;
    position: fixed;
    left: calc(0.7rem + var(--safe-left));
    bottom: calc(0.7rem + var(--safe-bottom));
    width: min(160px, 40vw);
    z-index: 4;
    background: #0f1630f0;
  }

  .control-column--right {
    order: 2;
    position: fixed;
    right: calc(0.7rem + var(--safe-right));
    bottom: calc(0.7rem + var(--safe-bottom));
    width: min(112px, 30vw);
    z-index: 4;
    padding: 0.4rem;
    background: #0f1630f0;
  }

  .game-shell {
    order: 1;
    align-items: center;
    justify-content: center;
  }

  .game-canvas {
    width: min(100%, calc(var(--shell-w, 100%) - var(--safe-left) - var(--safe-right) - 1.4rem));
    max-height: calc(var(--tg-viewport-stable-h) - var(--safe-top) - var(--safe-bottom) - var(--tg-content-top, 0px) - var(--tg-content-bottom, 0px) - var(--header-h) - 168px);
    height: auto;
  }

  .joystick-pad {
    width: min(150px, 40vw);
  }

  .action-btn {
    min-height: 36px;
    font-size: 0.72rem;
  }

  .action-btn--boost {
    min-height: 28px;
    font-size: 0.66rem;
  }

  .bomb-btn,
  .detonate-btn {
    width: 60px;
    height: 60px;
    min-height: 60px;
    font-size: 0.82rem;
  }
}



@keyframes right-panel-moss-shimmer {
  0% {
    transform: translate3d(-2%, 0, 0) scale(1);
    opacity: 0.28;
  }
  100% {
    transform: translate3d(2%, -3%, 0) scale(1.03);
    opacity: 0.44;
  }
}

.boot-splash {
  position: absolute;
  inset: 0;
  z-index: 80;
  display: grid;
  place-items: center;
  padding: 1rem;
  /* Future swap hook: replace gradients with background-image: url('/assets/ui/splash/splash_bg.webp'); once binary assets are available. */
  background:
    radial-gradient(circle at 18% 22%, #5f4ee633 0%, #5f4ee600 35%),
    radial-gradient(circle at 84% 30%, #49a9ff2b 0%, #49a9ff00 38%),
    radial-gradient(circle at 50% 56%, #8b67ff26 0%, #8b67ff00 48%),
    radial-gradient(circle at 50% 48%, #18294acc 0%, #0b1325f0 44%, #060a14 76%),
    linear-gradient(160deg, #040711 0%, #090f1f 45%, #060915 100%);
  opacity: 1;
  transition: opacity 300ms ease;
  isolation: isolate;
}

.boot-splash::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  opacity: 0.35;
  background: transparent;
  box-shadow:
    6vw 10vh 0 0 #eef3ff,
    12vw 26vh 0 0 #8cc1ff,
    19vw 14vh 0 0 #c7d2ff,
    23vw 62vh 0 0 #9fb8ff,
    31vw 34vh 0 0 #e4ebff,
    37vw 79vh 0 0 #9acbff,
    46vw 19vh 0 0 #d9e2ff,
    52vw 12vh 0 0 #90b9ff,
    58vw 65vh 0 0 #f2f6ff,
    67vw 41vh 0 0 #a3c4ff,
    73vw 21vh 0 0 #dee6ff,
    81vw 57vh 0 0 #96c8ff,
    88vw 31vh 0 0 #e0e9ff,
    93vw 74vh 0 0 #a6cfff;
}

.boot-splash--closing {
  opacity: 0;
  pointer-events: none;
}

.boot-splash-card {
  width: min(92vw, 560px);
  display: flex;
  flex-direction: column;
  gap: 0.65rem;
  padding: clamp(0.75rem, 2.2vw, 1.2rem);
  border: 1px solid #4a5f9d7d;
  border-radius: 16px;
  background: linear-gradient(160deg, #0b1326e8, #0d1731cc);
  box-shadow: 0 12px 36px #02050fcc, inset 0 1px 0 #8db1ff1f;
  backdrop-filter: blur(1.5px);
}

.boot-splash-logo {
  display: block;
  width: 100%;
  max-width: 460px;
  align-self: center;
  overflow: visible;
  filter: drop-shadow(0 0 10px #6ec5ff90) drop-shadow(0 0 20px #8d84ff66);
}

.boot-splash-logo text {
  margin: 0;
  fill: url(#bootLogoGradient);
  font-size: 86px;
  font-weight: 900;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  paint-order: stroke;
  stroke: #e8f2ff;
  stroke-opacity: 0.12;
  stroke-width: 1.2px;
}

.boot-splash-progress-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 0.6rem;
}

.boot-splash-progress-track {
  height: 14px;
  border-radius: 999px;
  border: 1px solid #425180;
  background: #0d1428;
  overflow: hidden;
}

.boot-splash-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #53b8ff, #8f7dff);
  transition: width 120ms linear;
}

.boot-splash-file {
  min-height: 1.2em;
  font-size: 0.8rem;
  color: #b9c5ec;
}

@media (max-width: 560px) {
  .boot-splash-logo text {
    font-size: 64px;
    letter-spacing: 0.04em;
  }

  .boot-splash-progress-track {
    height: 12px;
  }
}

.game-flow-overlay {
  position: absolute;
  inset: 0;
  z-index: 70;
  display: grid;
  place-items: center;
  padding: 1rem;
  background: radial-gradient(circle at 50% 25%, #1b2447dd, #060911f5 65%);
}

.intro-layer {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  overflow: hidden;
  isolation: isolate;
  background:
    radial-gradient(circle at 14% 20%, #7e6cff2b 0%, transparent 40%),
    radial-gradient(circle at 85% 25%, #5bc9ff26 0%, transparent 42%),
    radial-gradient(circle at 80% 82%, #8e6dff2b 0%, transparent 38%),
    linear-gradient(120deg, #04060f, #0a1231 46%, #07112b 100%);
  background-size: 180% 180%;
  animation: introGradientShift 8.5s ease-in-out infinite;
}

.intro-layer::before {
  content: '';
  position: absolute;
  inset: -12% -30%;
  pointer-events: none;
  background:
    radial-gradient(ellipse at center, #ffffff17 0%, #ffffff07 22%, transparent 66%);
  mix-blend-mode: screen;
  filter: blur(12px);
  animation: introHighlightSweep 6.2s ease-in-out infinite;
}

.intro-layer::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 50%, transparent 0 18%, #0000000f 30%, #00000078 100%);
}

.intro-layer__brand-wrap {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.65rem;
  text-align: center;
  padding: 1rem;
  color: #e8f1ff;
}

.intro-layer__brand {
  font-size: clamp(2rem, 7vw, 4.1rem);
  letter-spacing: 0.18em;
  font-weight: 900;
  line-height: 0.92;
  text-transform: uppercase;
  color: #f2f6ff;
  text-shadow: 0 0 14px #8fb4ff88, 0 0 40px #7f86ff55;
  animation: introBrandReveal 1600ms ease-out forwards;
}

.intro-layer__brand-wrap p {
  margin: 0;
  color: #b7c6ef;
  letter-spacing: 0.04em;
  opacity: 0;
  animation: introSubtitleReveal 700ms ease-out 600ms forwards;
}

@keyframes introGradientShift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 52%;
  }

  100% {
    background-position: 0% 50%;
  }
}

@keyframes introHighlightSweep {
  0% {
    opacity: 0.2;
    transform: translateX(-20%) translateY(-3%) rotate(-8deg);
  }

  50% {
    opacity: 0.42;
    transform: translateX(16%) translateY(4%) rotate(8deg);
  }

  100% {
    opacity: 0.2;
    transform: translateX(-20%) translateY(-3%) rotate(-8deg);
  }
}

@keyframes introBrandReveal {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.985);
    filter: blur(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

@keyframes introSubtitleReveal {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.game-flow-card {
  width: min(92vw, 520px);
  border: 1px solid #3d4f8a;
  border-radius: 14px;
  background: #0c1226f0;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.7rem;
  text-align: center;
}

.game-flow-card h2 {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.game-flow-card p {
  margin: 0;
  color: #bec8ea;
}

.game-flow-start-btn {
  min-width: 140px;
  border-radius: 999px;
  border: 1px solid #7f8dff;
  padding: 0.65rem 1.2rem;
  font-weight: 700;
  background: linear-gradient(180deg, #8a95ff, #5964d8);
  color: #ffffff;
}

.settings-overlay {
  position: absolute;
  inset: 0;
  background: #040812cc;
  display: grid;
  place-items: center;
  z-index: 40;
  padding: 0.6rem;
}

.settings-modal {
  width: min(92vw, 560px);
  max-height: calc(var(--tg-viewport-stable-h) * 0.88);
  overflow: auto;
  background: #0f1630;
  border: 1px solid #2c3b6c;
  border-radius: 12px;
  padding: 0.7rem;
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
}

.settings-header,
.settings-tabs,
.settings-row,
.settings-kv,
.settings-ref {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.settings-tabs button.active {
  background: #4a63b3;
}

.settings-panel {
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

.settings-ref input,
.settings-panel > input {
  width: 100%;
  min-width: 0;
}

.settings-inline-status {
  font-size: 0.86rem;
  color: #b9c7f1;
}

.settings-inline-error {
  font-size: 0.86rem;
  color: #ff8a8a;
}


.store-card {
  border: 1px solid #2c3b6c;
  border-radius: 10px;
  padding: 0.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.store-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.4rem;
}

.store-card-desc {
  color: #c3cfef;
  font-size: 0.88rem;
}

.store-soon-badge {
  margin-left: 0.35rem;
  font-size: 0.7rem;
  color: #f6c76a;
  font-style: normal;
}

.room-create-row,
.room-join-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.room-create-actions {
  display: flex;
  gap: 0.35rem;
}

.room-join-row input {
  flex: 1;
  min-width: 0;
}

.room-section {
  border: 1px solid #2c3b6c;
  border-radius: 10px;
  padding: 0.45rem;
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.room-list-item {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 0.5rem;
  align-items: center;
  text-align: left;
}

.room-members-list {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
}

.friend-list-item {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 0.5rem;
  align-items: center;
}

.friend-actions {
  display: flex;
  gap: 0.35rem;
}

.tutorial-overlay {
  position: absolute;
  inset: 0;
  z-index: 85;
  background: rgba(6, 9, 17, 0.74);
  pointer-events: auto;
}

.tutorial-spotlight {
  position: fixed;
  border-radius: 12px;
  border: 2px solid #9db2ff;
  box-shadow: 0 0 0 200vmax rgba(2, 4, 10, 0.65), 0 0 26px rgba(157, 178, 255, 0.75);
  pointer-events: none;
}

.tutorial-card {
  position: fixed;
  left: 50%;
  bottom: calc(var(--safe-bottom) + 1rem);
  transform: translateX(-50%);
  width: min(92vw, 420px);
  border: 1px solid #4f63a8;
  border-radius: 12px;
  background: #0c1226f2;
  padding: 0.8rem;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

.tutorial-card p {
  margin: 0;
  color: #ccd6f8;
}

.waiting-overlay {
  position: absolute;
  inset: 0;
  z-index: 75;
  display: grid;
  place-items: center;
  background: rgba(4, 8, 18, 0.72);
}

.waiting-overlay__card {
  width: min(90vw, 420px);
  border: 1px solid #40548f;
  border-radius: 12px;
  background: #0d142af0;
  padding: 0.9rem;
  text-align: center;
}

.waiting-overlay__card p {
  margin: 0.35rem 0 0;
  color: #c1cdef;
}

.rotate-overlay {
  position: absolute;
  inset: 0;
  z-index: 90;
  display: grid;
  place-items: center;
  background: rgba(3, 7, 16, 0.92);
  pointer-events: auto;
}

.rotate-overlay__card {
  width: min(90vw, 360px);
  border: 1px solid #4e62a0;
  border-radius: 14px;
  padding: 1rem;
  text-align: center;
  background: linear-gradient(160deg, #0d1530f2, #0a1228f2);
}

.rotate-overlay__card p {
  margin: 0.4rem 0 0;
  color: #c7d4fc;
}


.leaderboard-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
  padding: 0.5rem 0.2rem;
  border-bottom: 1px solid rgba(138, 160, 210, 0.18);
}

.leaderboard-row__left {
  display: flex;
  align-items: center;
  min-width: 0;
  gap: 0.55rem;
}

.leaderboard-rank {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
  min-width: 2.5rem;
  font-weight: 700;
}

.leaderboard-rank__icon {
  min-width: 1.1rem;
  text-align: center;
}

.leaderboard-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.leaderboard-score {
  font-variant-numeric: tabular-nums;
}

.lb-row--gold {
  color: transparent;
  background: linear-gradient(180deg, #fff7a7 0%, #ffd95f 45%, #d79f20 100%);
  -webkit-background-clip: text;
  background-clip: text;
  text-shadow: 0 0 12px rgba(255, 209, 77, 0.45);
}

.lb-row--silver {
  color: transparent;
  background: linear-gradient(180deg, #f3f7ff 0%, #d4dbe8 48%, #a8b2c3 100%);
  -webkit-background-clip: text;
  background-clip: text;
  text-shadow: 0 0 10px rgba(219, 229, 245, 0.34);
}

.lb-row--bronze {
  color: transparent;
  background: linear-gradient(180deg, #ffd8b2 0%, #ca8a55 55%, #9e5e2f 100%);
  -webkit-background-clip: text;
  background-clip: text;
}

.lb-row--neutral {
  color: #aeb7cb;
}

/* ===========================
   RR Unified Overlay Template
   =========================== */

.rr-overlay {
  /* same stacking as other overlays */
  z-index: 52;

  /* IMPORTANT: base overlay uses grid; control placement here */
  place-items: start center;

  /* Safe spacing from Telegram header + iOS safe area */
  padding-top: calc(var(--tg-content-top, 0px) + var(--safe-top) + 14px);
  padding-bottom: calc(var(--tg-content-bottom, 0px) + var(--safe-bottom) + 14px);
}

.rr-overlay-modal {
  /* Unified compact size like Multiplayer */
  width: min(92vw, 620px);

  /* Keep inside visible Telegram viewport */
  max-height: calc(
    var(--tg-viewport-stable-h)
    - var(--safe-top)
    - var(--safe-bottom)
    - var(--tg-content-top, 0px)
    - var(--tg-content-bottom, 0px)
    - 24px
  );

  overflow: auto;

  /* Unified frame look */
  border: 1px solid #3a5aa0;
  background: linear-gradient(165deg, rgba(8, 16, 38, 0.94), rgba(7, 14, 31, 0.95));
  backdrop-filter: blur(10px);
  box-shadow: 0 0 28px rgba(64, 111, 220, 0.24), inset 0 0 0 1px rgba(130, 170, 255, 0.12);
}

.rr-overlay .tab-row,
.rr-overlay .settings-tabs,
.rr-overlay .leaderboard-tabs {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.rr-overlay button,
.rr-overlay .tab-btn {
  min-height: 36px;
  border-radius: 12px;
}


.rr-overlay-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.45rem;
}

.rr-overlay-tabs {
  display: flex;
  gap: 0.35rem;
  flex-wrap: wrap;
}

.rr-overlay-tab,
.rr-overlay-close {
  border: 1px solid #334b86;
  background: rgba(11, 22, 49, 0.8);
  color: #dbe7ff;
  border-radius: 10px;
}

.rr-overlay-tab {
  padding: 0.38rem 0.52rem;
  text-transform: uppercase;
  font-size: 0.68rem;
  letter-spacing: 0.05em;
}

.rr-overlay-tab.active {
  border-color: #77a7ff;
  box-shadow: 0 0 16px rgba(75, 134, 255, 0.45), inset 0 0 16px rgba(75, 134, 255, 0.2);
  color: #ffffff;
}

.rr-overlay-close {
  padding: 0.38rem 0.62rem;
  text-transform: uppercase;
  font-size: 0.68rem;
  letter-spacing: 0.06em;
}

.rr-overlay-content {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.rr-panel {
  padding: 0.12rem 0;
}
.rr-mp-overlay {
  z-index: 52;

  /* IMPORTANT: settings-overlay is display:grid; align-items does nothing here.
     We must override grid placement to avoid TG header overlap. */
  place-items: start center;

  /* Safe spacing from Telegram header + iOS safe area */
  padding-top: calc(var(--tg-content-top, 0px) + var(--safe-top) + 14px);
  padding-bottom: calc(var(--tg-content-bottom, 0px) + var(--safe-bottom) + 14px);
}

.rr-mp-modal {
  /* More compact, consistent with other overlays */
  width: min(92vw, 620px);

  /* Keep inside visible Telegram viewport */
  max-height: calc(
    var(--tg-viewport-stable-h)
    - var(--safe-top)
    - var(--safe-bottom)
    - var(--tg-content-top, 0px)
    - var(--tg-content-bottom, 0px)
    - 24px
  );

  border: 1px solid #3a5aa0;
  background: linear-gradient(165deg, rgba(8, 16, 38, 0.94), rgba(7, 14, 31, 0.95));
  backdrop-filter: blur(10px);
  box-shadow: 0 0 28px rgba(64, 111, 220, 0.24), inset 0 0 0 1px rgba(130, 170, 255, 0.12);
}

.rr-mp-header {
  border-bottom: 1px solid rgba(106, 138, 214, 0.35);
  padding-bottom: 0.2rem;
}

.rr-mp-title {
  letter-spacing: 0.09em;
  color: #e8f0ff;
  text-shadow: 0 0 8px rgba(142, 182, 255, 0.55), 0 0 22px rgba(78, 132, 250, 0.28);
  animation: rr-mp-shimmer 4.2s ease-in-out infinite;
}

.rr-mp-close {
  border: 1px solid #5f7fc1;
  background: linear-gradient(180deg, rgba(65, 100, 176, 0.95), rgba(36, 61, 123, 0.95));
  box-shadow: 0 0 14px rgba(108, 153, 250, 0.32), inset 0 0 0 1px rgba(176, 205, 255, 0.16);
  color: #f2f7ff;
}

.rr-mp-close:hover {
  filter: brightness(1.08);
  box-shadow: 0 0 18px rgba(112, 168, 255, 0.45), inset 0 0 0 1px rgba(194, 220, 255, 0.22);
}

.rr-mp-close:active {
  transform: translateY(1px);
  filter: brightness(0.94);
}

.rr-mp-tabs {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 0.28rem;
}

.rr-mp-tabs button,
.rr-room-subtabs button {
  border: 1px solid #334b86;
  background: rgba(11, 22, 49, 0.72);
  color: #dbe7ff;
  border-radius: 9px;
  padding: 0.38rem 0.22rem;
  text-transform: uppercase;
  font-size: 0.64rem;
  letter-spacing: 0.06em;
}

.rr-mp-tabs .rr-mp-tab {
  border-color: rgba(95, 121, 183, 0.7);
}

.rr-mp-tabs .rr-mp-tab--friends { --rr-mp-accent: #67d4ff; }
.rr-mp-tabs .rr-mp-tab--find { --rr-mp-accent: #6ff7d9; }
.rr-mp-tabs .rr-mp-tab--room { --rr-mp-accent: #80a8ff; }
.rr-mp-tabs .rr-mp-tab--browse { --rr-mp-accent: #c18fff; }
.rr-mp-tabs .rr-mp-tab--referral { --rr-mp-accent: #ffc87f; }

.rr-mp-tabs .rr-mp-tab.active {
  border-color: var(--rr-mp-accent, #77a7ff);
  color: #ffffff;
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--rr-mp-accent, #77a7ff) 50%, transparent), 0 0 14px color-mix(in srgb, var(--rr-mp-accent, #77a7ff) 48%, transparent), inset 0 0 14px color-mix(in srgb, var(--rr-mp-accent, #77a7ff) 28%, transparent);
}

.rr-room-subtabs button.active {
  border-color: #77a7ff;
  box-shadow: 0 0 16px rgba(75, 134, 255, 0.45), inset 0 0 16px rgba(75, 134, 255, 0.2);
  color: #ffffff;
}

.rr-mp-panel {
  gap: 0.5rem;
}

@keyframes rr-mp-shimmer {
  0%, 100% {
    text-shadow: 0 0 7px rgba(137, 181, 255, 0.46), 0 0 18px rgba(86, 142, 255, 0.22);
    opacity: 0.94;
  }
  50% {
    text-shadow: 0 0 11px rgba(175, 211, 255, 0.72), 0 0 26px rgba(103, 171, 255, 0.35);
    opacity: 1;
  }
}



@media (orientation: landscape) and (max-height: 520px) {
  .rr-mp-overlay {
    padding-top: calc(var(--tg-content-top, 0px) + var(--safe-top) + 8px);
    padding-bottom: calc(var(--tg-content-bottom, 0px) + var(--safe-bottom) + 8px);
  }

  .rr-mp-modal {
    width: min(96vw, 700px);
    max-height: calc(
      var(--tg-viewport-stable-h)
      - var(--safe-top)
      - var(--safe-bottom)
      - var(--tg-content-top, 0px)
      - var(--tg-content-bottom, 0px)
      - 12px
    );
    border-radius: 10px;
  }

  .rr-mp-tabs {
    gap: 0.2rem;
  }
}
.rr-mp-section {
  border: 1px solid rgba(70, 98, 162, 0.8);
  border-radius: 12px;
  padding: 0.48rem 0.52rem;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  background: linear-gradient(165deg, rgba(13, 27, 56, 0.82), rgba(8, 16, 36, 0.86));
  box-shadow: inset 0 0 0 1px rgba(135, 178, 255, 0.08), 0 0 14px rgba(74, 123, 219, 0.16);
}

.rr-mp-section h4 {
  margin: 0;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  color: #b8d1ff;
}

.rr-mp-section-title {
  margin: 0;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  color: #b8d1ff;
}

.rr-mp-card {
  display: grid;
  grid-template-columns: auto 1fr auto auto;
  gap: 0.38rem;
  align-items: center;
  border: 1px solid #35508a;
  border-radius: 10px;
  padding: 0.34rem 0.42rem;
  background: rgba(9, 18, 40, 0.82);
}

.rr-mp-card-label {
  font-size: 0.76rem;
  color: #deebff;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.rr-mp-avatar {
  width: 24px;
  height: 24px;
  border-radius: 999px;
  display: inline-grid;
  place-items: center;
  color: #99beff;
  border: 1px solid #3e5f9e;
}

.rr-mp-chip {
  border-radius: 999px;
  border: 1px solid #4968a5;
  font-size: 0.58rem;
  padding: 0.1rem 0.32rem;
  text-transform: uppercase;
  line-height: 1.2;
}

.rr-mp-chip.online { color: #74ffb6; border-color: #2f8f67; }
.rr-mp-chip.offline { color: #98a5c6; }
.rr-mp-chip.pending { color: #ffc87f; border-color: #7d633c; }

.rr-mp-inline-actions {
  display: flex;
  gap: 0.35rem;
}

.spectator-overlay {
  position: absolute;
  inset: 0;
  z-index: 40;
  background: rgba(86, 94, 112, 0.45);
  pointer-events: none;
}

.restart-vote-hud {
  position: absolute;
  top: calc(var(--safe-top) + 0.75rem);
  left: 50%;
  transform: translateX(-50%);
  z-index: 78;
  min-width: min(440px, calc(100vw - 2rem));
  border: 1px solid #4a61a0;
  border-radius: 12px;
  padding: 0.6rem 0.7rem;
  background: rgba(10, 18, 36, 0.9);
  display: grid;
  gap: 0.45rem;
  pointer-events: auto;
}

.restart-vote-hud__label {
  color: #d0dcff;
  font-size: 0.82rem;
}

.restart-spectator-dock {
  position: absolute;
  left: 50%;
  bottom: calc(var(--safe-bottom) + 0.75rem);
  transform: translateX(-50%);
  z-index: 78;
  width: min(460px, calc(100vw - 1.5rem));
  border: 1px solid #4a61a0;
  border-radius: 12px;
  padding: 0.7rem;
  background: rgba(10, 18, 36, 0.94);
  display: grid;
  gap: 0.45rem;
  pointer-events: auto;
}

.restart-vote-actions {
  display: flex;
  gap: 0.4rem;
}

.restart-vote-progress {
  height: 6px;
  border-radius: 999px;
  overflow: hidden;
  background: rgba(120, 136, 179, 0.25);
}

.restart-vote-progress__fill {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, #76b8ff, #6ff7d9);
  transform-origin: left center;
}

.restart-cooldown {
  color: #ffcf9e;
  font-size: 0.78rem;
}

.rr-mp-section input,
.rr-mp-section button,
.rr-password-popup input,
.rr-password-popup button {
  border-radius: 9px;
}

.rr-mp-section input,
.rr-password-popup input {
  width: 100%;
  min-width: 0;
  border: 1px solid #39548f;
  background: rgba(4, 11, 27, 0.7);
  color: #e2ecff;
  padding: 0.42rem 0.5rem;
  font-size: 0.78rem;
}

.rr-mp-section button,
.rr-password-popup button {
  border: 1px solid #4869ad;
  background: linear-gradient(180deg, #345ca8, #263f7f);
  color: #f4f8ff;
  padding: 0.34rem 0.56rem;
  min-height: 30px;
  font-size: 0.7rem;
  text-align: center;
  box-shadow: 0 0 0 1px rgba(126, 178, 255, 0.18), 0 0 10px rgba(70, 125, 224, 0.2);
}

.rr-mp-section button:hover:not(:disabled),
.rr-password-popup button:hover:not(:disabled) {
  border-color: #6f95df;
  box-shadow: 0 0 0 1px rgba(150, 196, 255, 0.3), 0 0 14px rgba(94, 159, 255, 0.35);
}

.rr-mp-section button:active:not(:disabled),
.rr-password-popup button:active:not(:disabled) {
  transform: translateY(1px);
  box-shadow: 0 0 9px rgba(80, 137, 236, 0.28), inset 0 0 10px rgba(125, 174, 255, 0.2);
}

.rr-mp-section button.ghost,
.rr-password-popup button.ghost {
  background: rgba(9, 18, 39, 0.8);
}

.rr-room-subtabs {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.4rem;
}

.rr-arena-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.45rem;
}

.rr-arena-grid button {
  min-height: 44px;
}

.rr-created-room {
  grid-template-columns: 1fr auto;
}

.rr-created-room input {
  grid-column: 1 / -1;
}

.rr-created-room em {
  grid-column: 1 / -1;
  font-style: normal;
  color: #a9bbdf;
}

.rr-mp-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.4rem;
  align-items: center;
}

.rr-mp-mini-button {
  min-width: 58px;
  padding-inline: 0.45rem;
}

.rr-mp-rules {
  border: 1px solid #2f446f;
  border-radius: 10px;
  padding: 0.5rem;
}

.rr-mp-rules p,
.rr-mp-empty,
.rr-mp-error {
  margin: 0;
}

.rr-mp-error {
  color: #ff9090;
}

.rr-mp-empty {
  font-size: 0.66rem;
  color: #9cb3dd;
}

.rr-friends-panel {
  border-color: rgba(86, 178, 226, 0.5);
  box-shadow: inset 0 0 0 1px rgba(111, 222, 255, 0.1), 0 0 15px rgba(72, 193, 237, 0.16);
  gap: 0.26rem;
}

.rr-friends-panel .rr-mp-section-title,
.rr-friends-panel h4 {
  font-size: 0.62rem;
  line-height: 1.1;
  letter-spacing: 0.07em;
}

.rr-friends-panel .rr-mp-empty {
  font-size: 0.6rem;
  line-height: 1.2;
}

.rr-password-popup {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(82vw, 320px);
  border: 1px solid #5c7bb9;
  border-radius: 12px;
  background: #0c1734f5;
  padding: 0.6rem;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

.rr-toast-stack {
  position: absolute;
  right: 0.75rem;
  bottom: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  pointer-events: none;
}

.rr-toast {
  background: rgba(8, 18, 41, 0.94);
  border: 1px solid #4d73bb;
  border-radius: 9px;
  padding: 0.35rem 0.55rem;
  color: #d8e4ff;
  font-size: 0.75rem;
}

.rr-room-section {
  min-height: 360px;
}

.rr-room-home,
.rr-room-flow {
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
}

.rr-room-home button {
  min-height: 46px;
  font-size: 0.82rem;
}

.rr-arena-container {
  position: relative;
  min-height: 220px;
  border: 1px solid #375792;
  border-radius: 14px;
  background: radial-gradient(circle at center, rgba(26, 46, 88, 0.42), rgba(8, 15, 33, 0.88));
  padding: 0.5rem;
}

.rr-arena-slot {
  position: absolute;
  width: min(42%, 180px);
  min-height: 68px;
  border: 1px solid #3a5489;
  border-radius: 10px;
  background: rgba(11, 21, 44, 0.85);
  color: #dce7ff;
  padding: 0.45rem;
  text-align: left;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.2rem;
}

.rr-arena-slot strong {
  font-size: 0.75rem;
}

.rr-arena-slot span {
  font-size: 0.68rem;
  opacity: 0.9;
}

.rr-arena-slot.nw { top: 0.5rem; left: 0.5rem; }
.rr-arena-slot.ne { top: 0.5rem; right: 0.5rem; }
.rr-arena-slot.sw { bottom: 0.5rem; left: 0.5rem; }
.rr-arena-slot.se { bottom: 0.5rem; right: 0.5rem; }

.rr-arena-slot.host {
  border-color: #67a2ff;
  background: rgba(31, 66, 132, 0.5);
}

.rr-arena-slot.active {
  border-color: #5fda93;
  box-shadow: inset 0 0 0 1px rgba(101, 255, 166, 0.22);
}

.rr-arena-slot.inactive {
  opacity: 0.7;
}

.rr-room-lobby-head {
  display: grid;
  gap: 0.2rem;
}

.rr-ready-on {
  color: #77f0a8;
}

.rr-ready-off {
  color: #ffb0b0;
}

.rr-ready-button-on {
  border-color: #57d58e !important;
  box-shadow: 0 0 14px rgba(87, 213, 142, 0.28);
}

.rr-room-list-item {
  grid-template-columns: 1fr auto auto auto;
}

.rr-room-shell {
  min-height: 360px;
}

.rr-room-home {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.45rem;
}

.rr-room-home button {
  min-height: 42px;
}

.rr-room-flow {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 0.42rem;
}

.rr-room-flow-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.rr-room-back-button {
  position: relative;
  overflow: hidden;
  min-height: 30px;
  min-width: 32px;
  width: 32px;
  padding: 0.24rem;
  border-color: rgba(116, 195, 255, 0.9);
  box-shadow: 0 0 8px rgba(111, 222, 255, 0.2), inset 0 0 8px rgba(111, 222, 255, 0.1);
  background: linear-gradient(120deg, rgba(23, 47, 90, 0.94), rgba(13, 32, 66, 0.94));
}

.rr-room-back-button span {
  position: relative;
  z-index: 1;
  font-size: 0.84rem;
  line-height: 1;
}

.rr-room-back-button::after {
  content: '';
  position: absolute;
  inset: -30% auto -30% -90%;
  width: 55%;
  background: linear-gradient(110deg, transparent 0%, rgba(181, 237, 255, 0.5) 48%, transparent 100%);
  transform: skewX(-20deg);
  animation: rr-room-back-shine 2.8s ease-in-out infinite;
  pointer-events: none;
}

@keyframes rr-room-back-shine {
  0% { left: -90%; }
  70% { left: 135%; }
  100% { left: 135%; }
}

.rr-room-back-button:hover:not(:disabled) {
  border-color: rgba(129, 224, 255, 0.96);
  box-shadow: 0 0 12px rgba(111, 222, 255, 0.3), inset 0 0 12px rgba(111, 222, 255, 0.18);
}

.rr-room-back-button:active:not(:disabled) {
  transform: translateY(1px);
  box-shadow: 0 0 7px rgba(111, 222, 255, 0.2), inset 0 0 10px rgba(111, 222, 255, 0.14);
}

.rr-room-fields-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.55rem;
}

.rr-room-field {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  flex: 1 1 180px;
}

.rr-room-field input {
  max-width: 260px;
}

.rr-room-field--name input {
  border-color: rgba(104, 206, 255, 0.78);
  box-shadow: inset 0 0 0 1px rgba(104, 206, 255, 0.14), 0 0 10px rgba(76, 180, 255, 0.2);
}

.rr-room-field--password input {
  border-color: rgba(190, 148, 255, 0.78);
  box-shadow: inset 0 0 0 1px rgba(190, 148, 255, 0.14), 0 0 10px rgba(173, 121, 255, 0.18);
}

.rr-room-corner-board {
  position: relative;
  min-height: 182px;
  border: 1px solid #375792;
  border-radius: 12px;
  background: radial-gradient(circle at center, rgba(26, 46, 88, 0.38), rgba(8, 15, 33, 0.9));
  padding: 0.42rem;
}

.rr-room-corner-board.lobby {
  min-height: 220px;
}

.rr-room-slot-preview {
  position: absolute;
  width: min(39%, 150px);
  min-height: 56px;
  border: 1px solid #3a5489;
  border-radius: 10px;
  background: rgba(11, 21, 44, 0.85);
  color: #dce7ff;
  padding: 0.3rem 0.35rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 0.12rem;
  text-align: center;
}

.rr-room-slot-preview strong {
  font-size: 0.68rem;
}

.rr-room-slot-preview span {
  font-size: 0.6rem;
  opacity: 0.9;
}

.rr-room-slot-preview.nw { top: 0.42rem; left: 0.42rem; border-color: #ff667a; background: linear-gradient(145deg, rgba(255, 102, 122, 0.2), rgba(35, 13, 21, 0.9)); }
.rr-room-slot-preview.ne { top: 0.42rem; right: 0.42rem; border-color: #61adff; background: linear-gradient(145deg, rgba(97, 173, 255, 0.2), rgba(11, 26, 50, 0.9)); }
.rr-room-slot-preview.sw { bottom: 0.42rem; left: 0.42rem; border-color: #71e7b7; background: linear-gradient(145deg, rgba(113, 231, 183, 0.2), rgba(11, 35, 32, 0.9)); }
.rr-room-slot-preview.se { bottom: 0.42rem; right: 0.42rem; border-color: #c295ff; background: linear-gradient(145deg, rgba(194, 149, 255, 0.2), rgba(29, 18, 42, 0.9)); }

.rr-room-slot-preview.host {
  border-color: #67a2ff;
}

.rr-room-slot-preview.enabled,
.rr-room-slot-preview.ready {
  box-shadow: 0 0 12px rgba(140, 190, 255, 0.2), inset 0 0 0 1px rgba(175, 218, 255, 0.14);
}

.rr-room-slot-preview.waiting {
  opacity: 0.92;
}

.rr-room-slot-preview:disabled,
.rr-room-slot-preview.disabled {
  border-color: rgba(119, 138, 176, 0.45);
  background: rgba(13, 20, 34, 0.65);
  color: rgba(220, 231, 255, 0.62);
  opacity: 0.7;
  box-shadow: none;
  cursor: not-allowed;
}

.rr-room-board-center {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.32rem;
  width: min(40%, 170px);
  text-align: center;
}

.rr-room-board-center button {
  width: 100%;
}

.rr-room-create-cta {
  width: auto !important;
  min-width: 100px;
  padding: 0.36rem 0.8rem;
  border-color: #74e6ff;
  background: linear-gradient(140deg, rgba(19, 53, 104, 0.95), rgba(33, 116, 132, 0.9));
  box-shadow: 0 0 0 1px rgba(116, 230, 255, 0.35), 0 0 18px rgba(58, 205, 255, 0.36), inset 0 0 14px rgba(156, 245, 255, 0.2);
}

.rr-room-create-cta:hover:not(:disabled) {
  border-color: #90f0ff;
  box-shadow: 0 0 0 1px rgba(144, 240, 255, 0.45), 0 0 22px rgba(58, 205, 255, 0.5), inset 0 0 18px rgba(176, 251, 255, 0.24);
}

.rr-room-create-cta:disabled {
  box-shadow: none;
}

.rr-room-players-line {
  white-space: nowrap;
}

.rr-room-list {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  max-height: 162px;
  overflow: auto;
  padding-right: 0.2rem;
}

.rr-room-list-item {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 0.4rem;
  align-items: center;
  border: 1px solid #3d60a7;
  background: rgba(12, 24, 52, 0.82);
  border-radius: 9px;
  padding: 0.34rem 0.46rem;
  color: #dbe7ff;
  font-size: 0.68rem;
}

.rr-room-code-fallback {
  border: 1px solid rgba(80, 116, 186, 0.72);
  border-radius: 10px;
  background: rgba(9, 20, 45, 0.72);
  margin-top: 0.14rem;
  padding: 0.42rem;
}

.rr-room-join-card {
  border: 1px solid rgba(78, 118, 194, 0.78);
  border-radius: 11px;
  background: rgba(8, 17, 37, 0.78);
  padding: 0.4rem;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.rr-room-search-input {
  min-height: 32px;
  border-radius: 8px;
  box-shadow: inset 0 0 0 1px rgba(131, 171, 245, 0.22), 0 0 12px rgba(80, 145, 255, 0.16);
}

.rr-room-empty-state {
  text-align: center;
  border: 1px dashed rgba(132, 163, 224, 0.36);
  border-radius: 8px;
  padding: 0.34rem;
  background: rgba(8, 17, 37, 0.6);
}

.rr-room-code-row input {
  min-width: 0;
}

.rr-room-join-cta {
  min-width: 76px;
  min-height: 32px;
  border-color: #76ddff !important;
  background: linear-gradient(145deg, rgba(34, 81, 155, 0.96), rgba(27, 118, 140, 0.9)) !important;
  box-shadow: 0 0 0 1px rgba(124, 223, 255, 0.4), 0 0 16px rgba(76, 200, 244, 0.34) !important;
}

.rr-room-join-cta:hover:not(:disabled) {
  box-shadow: 0 0 0 1px rgba(158, 234, 255, 0.55), 0 0 20px rgba(93, 213, 255, 0.45) !important;
}

@media (orientation: landscape) and (max-height: 520px) {
  .rr-room-shell {
    min-height: 0;
  }

  .rr-room-flow {
    gap: 0.36rem;
  }

  .rr-room-list {
    max-height: 132px;
  }

  .rr-room-code-fallback {
    padding: 0.34rem;
  }

  .rr-mp-section {
    padding: 0.42rem;
  }
}

.rr-room-actions {
  justify-content: flex-end;
}

.rr-slot-kick {
  position: absolute;
  right: 0.28rem;
  top: 0.28rem;
  width: 18px;
  height: 18px;
  padding: 0;
  border-radius: 50%;
  opacity: 0.75;
}

.rr-room-ready-waiting {
  font-size: 0.58rem;
  line-height: 1.2;
  color: #9ac9ff;
}

.rr-diag-overlay-root {
  position: fixed;
  right: 0.75rem;
  bottom: 0.75rem;
  z-index: 2800;
  pointer-events: none;
}

.rr-diag-pill {
  pointer-events: auto;
  border: 1px solid #3b5da0;
  border-radius: 999px;
  background: rgba(8, 18, 44, 0.92);
  color: #e1ecff;
  padding: 0.35rem 0.6rem;
  font-size: 0.72rem;
}

.rr-diag-panel {
  margin-top: 0.4rem;
  width: min(92vw, 600px);
  max-height: 50vh;
  overflow: auto;
  pointer-events: auto;
  border: 1px solid #3b5da0;
  border-radius: 12px;
  background: rgba(6, 12, 30, 0.95);
  color: #d5e4ff;
  padding: 0.55rem;
  display: flex;
  flex-direction: column;
  gap: 0.45rem;
}

.rr-diag-head,
.rr-diag-actions,
.rr-diag-filters {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  flex-wrap: wrap;
}

.rr-diag-head { justify-content: space-between; }

.rr-diag-kv {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.18rem 0.4rem;
  font-size: 0.72rem;
}

.rr-diag-kv code { overflow-wrap: anywhere; }

.rr-diag-filters button.active { border-color: #88b2ff; }

.rr-diag-log {
  border: 1px solid #263d6f;
  border-radius: 10px;
  padding: 0.35rem;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
}

.rr-diag-row {
  display: grid;
  grid-template-columns: 92px 44px 44px 1fr;
  gap: 0.35rem;
  font-size: 0.68rem;
}

.rr-diag-row--warn { color: #ffd48c; }
.rr-diag-row--error { color: #ff9d9d; }

.rr-diag-empty {
  font-size: 0.72rem;
  color: #9bb2de;
}

.debug-on-badge {
  position: fixed;
  top: 0.55rem;
  left: 0.55rem;
  z-index: 3200;
  pointer-events: none;
  padding: 0.2rem 0.45rem;
  border-radius: 999px;
  border: 1px solid rgba(136, 178, 255, 0.8);
  background: rgba(6, 14, 36, 0.88);
  color: #cde0ff;
  font-size: 0.62rem;
  font-weight: 800;
  letter-spacing: 0.06em;
}
